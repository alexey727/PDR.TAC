<ng-container *ngIf="user$ | async as user; else errorState">
  <h2 mat-dialog-title>{{ user.firstName }} {{ user.lastName }}</h2>
  <mat-dialog-content class="details">
    <div class="summary">
      <app-user-avatar
        [name]="user.firstName + ' ' + user.lastName"
        [email]="user.email"
        [size]="96"
      ></app-user-avatar>
      <div class="summary__meta">
        <span class="summary__name">{{ user.firstName }} {{ user.lastName }}</span>
        <span class="summary__role">{{ user.role | titlecase }}</span>
      </div>
    </div>
    <dl>
      <div>
        <dt>Email</dt>
        <dd>{{ user.email }}</dd>
      </div>
      <div>
        <dt>Phone</dt>
        <dd>{{ user.phoneNumber || '—' }}</dd>
      </div>
      <div>
        <dt>Birth date</dt>
        <dd>{{ user.birthDate || '—' }}</dd>
      </div>
      <div>
        <dt>Role</dt>
        <dd>{{ user.role }}</dd>
      </div>
    </dl>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-flat-button mat-dialog-close color="primary">Close</button>
  </mat-dialog-actions>
</ng-container>

<ng-template #errorState>
  <mat-dialog-content>
    <p>Unable to load user details.</p>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-flat-button mat-dialog-close>Close</button>
  </mat-dialog-actions>
</ng-template>
